(()=>{let e=!1;const t=()=>{const t=document.getElementById("send_email");t&&!e&&(t.addEventListener("submit",(e=>{e.preventDefault();const o=new FormData(t),a={};o.forEach(((e,t)=>{a[t]=e}));const s=t.querySelector('input[name="email"]').value;a.email=s,console.log("Form data:",a),a.abit_fio&&a.abit_email&&a.abit_text?n(a):alert("Пожалуйста, заполните все поля.")})),e=!0,console.log("Form handler added."))},o=()=>{new MutationObserver((e=>{for(const o of e)"childList"===o.type&&t()})).observe(document.body,{childList:!0,subtree:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o();const n=e=>{let t;t="localhost"===window.location.hostname?"http://verba.gurgurich.ru/wp-json/abit/v1/email":window.location.href+"/wp-json/abit/v1/email",a(t,e)},a=(e,t)=>{const o=document.querySelector('#send_email button[type="submit"]');o&&(o.disabled=!0),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{console.log("Response:",e.message),alert(e.message)})).catch((e=>{console.error("Error:",e),alert("Произошла ошибка при отправке формы.")})).finally((()=>{o&&(o.disabled=!1)}))}})();